{% extends "base.html" %} 
{% block content %}

{% with action=url_for('todos.create')%}
    {%include "todos/form.html"%}
{% endwith %}
<hr>

<h1>Todos:</h1>

<table class="table">
  <thead>
    <tr>
        <th scope="col">#</th>
        <th scope="col">Username</th>
        <th scope="col">Email</th>
        <th scope="col">Text</th>
        <th scope="col">Status</th>
        <th scope="col">Control</th>
    </tr>
  </thead>
  <tbody>
    {% for todo in todos.items %}
    <tr>
        <td>{{todo.id}}</td>
        <td>{{todo.username}}</td>
        <td>{{todo.email}}</td>
        <td>{{todo.text}}</td>
        <td>{{todo.status}}</td>
        <td>
            <div class="btn-group">
                <a href="{{ url_for('todos.edit', id=todo.id) }}" class="btn btn-outline-secondary"><i class="bi bi-pencil"></i></a>
                <a href="{{ url_for('todos.delete', id=todo.id) }}" class="btn btn-outline-secondary"><i class="bi bi-trash2"></i></a>
            </div>
        </td>
    </tr>
    {% endfor %}
  </tbody>
</table>
<nav class="navbar">
    <div class="container-fluid">

    <div class="text-left ">
        Showing page {{ todos.page }} of {{ todos.pages }}
     </div>
    <ul class="pagination justify-content-end">
        {% for page_num in todos.iter_pages(left_edge=1, right_edge=1, left_current=2, right_current=2) %}
            {% if page_num %}

                <li class="page-item {% if todos.page == page_num %}active{% endif %}">
                    <a href="{{ url_for('todos.list', page=page_num, order_by=order_by, desc=desc) }}" class="page-link">
                        {{ page_num }}
                    </a>
                </li>
            {% else %}
                <li class="page-item disabled">
                    <a class="page-link">
                        ...
                    </a>
                </li>
            {% endif %}
        {% endfor %}
    </ul>
</div>

</nav>

{% endblock%}
